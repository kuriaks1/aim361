{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { MqttOverWSProvider } from './MqttOverWSProvider';\nimport { Signer, Credentials } from '@aws-amplify/core';\nvar SERVICE_NAME = 'iotdevicegateway';\nvar AWSIoTProvider = /** @class */function (_super) {\n  __extends(AWSIoTProvider, _super);\n  function AWSIoTProvider(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    return _super.call(this, options) || this;\n  }\n  Object.defineProperty(AWSIoTProvider.prototype, \"region\", {\n    get: function () {\n      return this.options['aws_pubsub_region'];\n    },\n    enumerable: true,\n    configurable: true\n  });\n  AWSIoTProvider.prototype.getProviderName = function () {\n    return 'AWSIoTProvider';\n  };\n  Object.defineProperty(AWSIoTProvider.prototype, \"endpoint\", {\n    get: function () {\n      var _this = this;\n      return function () {\n        return __awaiter(_this, void 0, void 0, function () {\n          var endpoint, serviceInfo, _a, access_key, secret_key, session_token, result;\n          return __generator(this, function (_b) {\n            switch (_b.label) {\n              case 0:\n                endpoint = this.options.aws_pubsub_endpoint;\n                serviceInfo = {\n                  service: SERVICE_NAME,\n                  region: this.region\n                };\n                return [4 /*yield*/, Credentials.get()];\n              case 1:\n                _a = _b.sent(), access_key = _a.accessKeyId, secret_key = _a.secretAccessKey, session_token = _a.sessionToken;\n                result = Signer.signUrl(endpoint, {\n                  access_key: access_key,\n                  secret_key: secret_key,\n                  session_token: session_token\n                }, serviceInfo);\n                return [2 /*return*/, result];\n            }\n          });\n        });\n      }();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  return AWSIoTProvider;\n}(MqttOverWSProvider);\nexport { AWSIoTProvider };","map":{"version":3,"mappings":";AAAA;AACA;AACA,SAASA,kBAAkB,QAA6B,sBAAsB;AAC9E,SAASC,MAAM,EAAEC,WAAW,QAAQ,mBAAmB;AAEvD,IAAMC,YAAY,GAAG,kBAAkB;AAOvC;EAAoCC;EACnC,wBAAYC,OAAmC;IAAnC;MAAAA,YAAmC;IAAA;WAC9CC,kBAAMD,OAAO,CAAC;EACf;EAEAE,sBAAcC,kCAAM;SAApB;MACC,OAAO,IAAI,CAACH,OAAO,CAAC,mBAAmB,CAAC;IACzC,CAAC;;;;EAEMG,wCAAe,GAAtB;IACC,OAAO,gBAAgB;EACxB,CAAC;EAEDD,sBAAcC,oCAAQ;SAAtB;MAAA;MACC,OAAQ;QAAA;;;;;gBACDC,QAAQ,GAAG,IAAI,CAACJ,OAAO,CAACK,mBAAmB;gBAE3CC,WAAW,GAAG;kBACnBC,OAAO,EAAET,YAAY;kBACrBU,MAAM,EAAE,IAAI,CAACA;iBACb;gBAKG,qBAAMX,WAAW,CAACY,GAAG,EAAE;;gBAJrBC,KAIFC,SAAuB,EAHbC,UAAU,mBACNC,UAAU,uBACbC,aAAa;gBAGtBC,MAAM,GAAGnB,MAAM,CAACoB,OAAO,CAC5BZ,QAAQ,EACR;kBAAEQ,UAAU;kBAAEC,UAAU;kBAAEC,aAAa;gBAAA,CAAE,EACzCR,WAAW,CACX;gBAED,sBAAOS,MAAM;;;;OACb,CAAC,CAAE;IACL,CAAC;;;;EACF,qBAAC;AAAD,CAAC,CApCmCpB,kBAAkB","names":["MqttOverWSProvider","Signer","Credentials","SERVICE_NAME","__extends","options","_super","Object","AWSIoTProvider","endpoint","aws_pubsub_endpoint","serviceInfo","service","region","get","_a","_b","access_key","secret_key","session_token","result","signUrl"],"sources":["/Workshop/product-metadata/guidance-for-generating-product-descriptions-with-bedrock/source/frontend/node_modules/@aws-amplify/pubsub/src/Providers/AWSIotProvider.ts"],"sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { MqttOverWSProvider, MqttProviderOptions } from './MqttOverWSProvider';\nimport { Signer, Credentials } from '@aws-amplify/core';\n\nconst SERVICE_NAME = 'iotdevicegateway';\n\nexport interface AWSIoTProviderOptions extends MqttProviderOptions {\n\taws_pubsub_region?: string;\n\taws_pubsub_endpoint?: string;\n}\n\nexport class AWSIoTProvider extends MqttOverWSProvider {\n\tconstructor(options: AWSIoTProviderOptions = {}) {\n\t\tsuper(options);\n\t}\n\n\tprotected get region(): string | undefined {\n\t\treturn this.options['aws_pubsub_region'];\n\t}\n\n\tpublic getProviderName() {\n\t\treturn 'AWSIoTProvider';\n\t}\n\n\tprotected get endpoint() {\n\t\treturn (async () => {\n\t\t\tconst endpoint = this.options.aws_pubsub_endpoint;\n\n\t\t\tconst serviceInfo = {\n\t\t\t\tservice: SERVICE_NAME,\n\t\t\t\tregion: this.region,\n\t\t\t};\n\t\t\tconst {\n\t\t\t\taccessKeyId: access_key,\n\t\t\t\tsecretAccessKey: secret_key,\n\t\t\t\tsessionToken: session_token,\n\t\t\t} = await Credentials.get();\n\n\t\t\tconst result = Signer.signUrl(\n\t\t\t\tendpoint,\n\t\t\t\t{ access_key, secret_key, session_token },\n\t\t\t\tserviceInfo\n\t\t\t);\n\n\t\t\treturn result;\n\t\t})();\n\t}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}