import{__rest as e}from"tslib";import o from"classnames";import*as t from"react";import{AutocompleteOption as n}from"./AutocompleteOption.mjs";import{AutocompleteMenu as a}from"./AutocompleteMenu.mjs";import{useAutocomplete as l}from"./useAutocomplete.mjs";import{HighlightMatch as i}from"../HighlightMatch/HighlightMatch.mjs";import{SearchField as r}from"../SearchField/SearchField.mjs";import{View as s}from"../View/View.mjs";import{isFunction as m}from"../shared/utils.mjs";import{ComponentClassNames as c}from"../shared/constants.mjs";const u=(u,p)=>{var{className:d,defaultValue:h,value:f,isLoading:C=!1,menuSlots:g={},options:O,optionFilter:b,onBlur:v,onChange:I,onClear:S,onClick:j,onSelect:M,onSubmit:k,renderOption:w,testId:A}=u,B=e(u,["className","defaultValue","value","isLoading","menuSlots","options","optionFilter","onBlur","onChange","onClear","onClick","onSelect","onSubmit","renderOption","testId"]);const{activeOptionId:V,autocompleteId:x,composedValue:F,filteredOptions:y,handleOnBlur:E,handleOnClear:D,handleOnClick:N,handleOnChange:L,handleOnKeyDown:H,isControlled:K,isCustomFiltering:$,isMenuOpen:q,listboxId:R,menuId:z,optionBaseId:G,setActiveOption:J,setIsMenuOpen:P,setInternalValue:Q}=l({defaultValue:h,value:f,options:O,optionFilter:b,onBlur:v,onChange:I,onClear:S,onClick:j,onSelect:M,onSubmit:k}),T={role:"combobox","aria-activedescendant":V,"aria-autocomplete":"list","aria-controls":q?z:void 0,"aria-expanded":q,"aria-haspopup":"listbox","aria-owns":q?z:void 0},U=y.map(((o,a)=>{const{id:l,label:r}=o,s=e(o,["id","label"]),c=null!=l?l:`${G}-option-${a}`,u=c===V;return t.createElement(n,Object.assign({isActive:u,id:c,key:c,onClick:()=>{P(!1),J(null),K||Q(r),m(M)&&M(o)},onMouseDown:e=>{e.preventDefault()},onMouseMove:()=>{J(o)}},s),m(w)?w(o,F):$?r:t.createElement(i,{query:F},r))}));return t.createElement(s,{className:o(c.Autocomplete,d),id:x,testId:A},t.createElement(r,Object.assign({hasSearchButton:!1,hasSearchIcon:!0,onBlur:E,onChange:L,onClear:D,onClick:N,onKeyDown:H,ref:p,value:F},T,B)),q?t.createElement(a,Object.assign({id:z,isLoading:C,listboxId:R},g),U):null)},p=t.forwardRef(u);p.displayName="Autocomplete";export{p as Autocomplete,u as AutocompletePrimitive};
