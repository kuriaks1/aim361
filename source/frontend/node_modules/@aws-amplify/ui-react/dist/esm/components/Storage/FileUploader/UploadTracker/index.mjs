import e,{useCallback as i}from"react";import{translate as t,humanFileSize as m}from"@aws-amplify/ui";import"../../../../primitives/Alert/Alert.mjs";import"../../../../primitives/Autocomplete/Autocomplete.mjs";import"../../../../primitives/Badge/Badge.mjs";import{Button as r}from"../../../../primitives/Button/Button.mjs";import"../../../../primitives/ButtonGroup/ButtonGroup.mjs";import"../../../../primitives/Card/Card.mjs";import"../../../../primitives/CheckboxField/CheckboxField.mjs";import"../../../../primitives/Collection/Collection.mjs";import"../../../../primitives/Divider/Divider.mjs";import"../../../../primitives/Expander/Expander.mjs";import"../../../../primitives/Expander/ExpanderItem.mjs";import"../../../../primitives/FieldGroupIcon/FieldGroupIcon.mjs";import"../../../../primitives/FieldGroupIcon/FieldGroupIconButton.mjs";import"../../../../primitives/Flex/Flex.mjs";import"../../../../primitives/Grid/Grid.mjs";import"../../../../primitives/Heading/Heading.mjs";import"../../../../primitives/HighlightMatch/HighlightMatch.mjs";import"../../../../primitives/Icon/Icon.mjs";import{Image as l}from"../../../../primitives/Image/Image.mjs";import"../../../../primitives/Link/Link.mjs";import{Loader as s}from"../../../../primitives/Loader/Loader.mjs";import"../../../../primitives/Menu/Menu.mjs";import"../../../../primitives/Menu/MenuButton.mjs";import"../../../../primitives/Menu/MenuItem.mjs";import"../../../../primitives/Pagination/Pagination.mjs";import"../../../../primitives/PasswordField/PasswordField.mjs";import"../../../../primitives/PhoneNumberField/PhoneNumberField.mjs";import"../../../../primitives/Placeholder/Placeholder.mjs";import"../../../../primitives/Radio/Radio.mjs";import"../../../../primitives/RadioGroupField/RadioGroupField.mjs";import"../../../../primitives/Rating/Rating.mjs";import"../../../../primitives/ScrollView/ScrollView.mjs";import"../../../../primitives/SearchField/SearchField.mjs";import"../../../../primitives/SelectField/SelectField.mjs";import"../../../../primitives/SliderField/SliderField.mjs";import"../../../../primitives/StepperField/StepperField.mjs";import"../../../../primitives/SwitchField/SwitchField.mjs";import"../../../../primitives/Table/Table.mjs";import"../../../../primitives/Table/TableBody.mjs";import"../../../../primitives/Table/TableCell.mjs";import"../../../../primitives/Table/TableFoot.mjs";import"../../../../primitives/Table/TableHead.mjs";import"../../../../primitives/Table/TableRow.mjs";import"../../../../primitives/Tabs/Tabs.mjs";import{Text as a}from"../../../../primitives/Text/Text.mjs";import"../../../../primitives/TextAreaField/TextAreaField.mjs";import{TextField as o}from"../../../../primitives/TextField/TextField.mjs";import"../../../../primitives/ToggleButton/ToggleButton.mjs";import"../../../../primitives/ToggleButtonGroup/ToggleButtonGroup.mjs";import{View as n}from"../../../../primitives/View/View.mjs";import{VisuallyHidden as p}from"../../../../primitives/VisuallyHidden/VisuallyHidden.mjs";import{ComponentClassNames as c}from"../../../../primitives/shared/constants.mjs";import"tslib";import"classnames";import{IconClose as d}from"../../../../primitives/Icon/icons/IconClose.mjs";import{IconEdit as u}from"../../../../primitives/Icon/icons/IconEdit.mjs";import{IconFile as v}from"../../../../primitives/Icon/icons/IconFile.mjs";import{UploadMessage as j}from"./UploadMessage.mjs";function F({errorMessage:F,file:g,fileState:E,hasImage:f,name:T,onCancel:b,onCancelEdit:h,onPause:S,onResume:x,onSaveEdit:I,onStartEdit:C,percentage:R,isResumable:k,showImage:w}){const[B,G]=e.useState(T),M=e.useRef(null),z=URL.createObjectURL(g);e.useEffect((()=>{"editing"===E&&M.current&&M.current.focus()}),[E]);const{size:N}=g,P=f?e.createElement(l,{alt:g.name,src:z}):e.createElement(v,null),U=!k||R>0,H=null===E||"error"===E&&F===t("Extension not allowed"),L=i((()=>e.createElement(e.Fragment,null,e.createElement(n,{className:c.FileUploaderFileMain},e.createElement(a,{className:c.FileUploaderFileName},T)),e.createElement(a,{as:"span",className:c.FileUploaderFileSize},m(N,!0)))),[T,N]),A=i((()=>{switch(E){case"editing":return e.createElement(e.Fragment,null,e.createElement(r,{size:"small",onClick:()=>{G(T),h()}},"Cancel"),e.createElement(r,{size:"small",variation:"primary",onClick:()=>{I(B)}},"Save"));case"resume":case"loading":return k?e.createElement(r,{onClick:S,size:"small",variation:"link"},t("pause")):null;case"paused":return e.createElement(r,{onClick:x,size:"small",variation:"link"},t("Resume"));case"success":return null;default:return e.createElement(e.Fragment,null,H?e.createElement(r,{onClick:C,size:"small",variation:"link"},e.createElement(p,null,"Edit file name ",g.name),e.createElement(u,{"aria-hidden":!0,fontSize:"medium"})):null,e.createElement(r,{size:"small",onClick:b},e.createElement(p,null,"Remove file name ",g.name),e.createElement(d,{"aria-hidden":!0,fontSize:"medium"})))}}),[g.name,E,k,T,b,h,S,x,I,C,H,B]);return g?e.createElement(n,{className:c.FileUploaderFile},e.createElement(n,{className:c.FileUploaderFileWrapper},w?e.createElement(n,{className:c.FileUploaderFileImage},P):null,"editing"===E?e.createElement(n,{as:"form",flex:"1",onSubmit:()=>{I(B)}},e.createElement(o,{maxLength:1024,ref:M,label:"file name",size:"small",variation:"quiet",labelHidden:!0,onChange:e=>{G(e.target.value)},value:B})):e.createElement(L,null),e.createElement(A,null),"loading"===E?e.createElement(s,{className:c.FileUploaderLoader,variation:"linear",percentage:R,isDeterminate:U,isPercentageTextHidden:!0}):null),e.createElement(j,{fileState:E,errorMessage:F,percentage:R})):null}export{F as UploadTracker};
